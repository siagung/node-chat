<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>wakjek node.js+socket.io demo</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://localhost:5000/socket.io/socket.io.js"></script>
<script>

       // var definition = {smile:{title:"Smile",codes:[":)",":=)",":-)"]},"sad-smile":{title:"Sad Smile",codes:[":(",":=(",":-("]},"big-smile":{title:"Big Smile",codes:[":D",":=D",":-D",":d",":=d",":-d"]},cool:{title:"Cool",codes:["8)","8=)","8-)","B)","B=)","B-)","(cool)"]},wink:{title:"Wink",codes:[":o",":=o",":-o",":O",":=O",":-O"]},crying:{title:"Crying",codes:[";(",";-(",";=("]},sweating:{title:"Sweating",codes:["(sweat)","(:|"]},speechless:{title:"Speechless",codes:[":|",":=|",":-|"]},kiss:{title:"Kiss",codes:[":*",":=*",":-*"]},"tongue-out":{title:"Tongue Out",codes:[":P",":=P",":-P",":p",":=p",":-p"]},blush:{title:"Blush",codes:["(blush)",":$",":-$",":=$",':">']},wondering:{title:"Wondering",codes:[":^)"]},sleepy:{title:"Sleepy",codes:["|-)","I-)","I=)","(snooze)"]},dull:{title:"Dull",codes:["|(","|-(","|=("]},"in-love":{title:"In love",codes:["(inlove)"]},"evil-grin":{title:"Evil grin",codes:["]:)",">:)","(grin)"]},talking:{title:"Talking",codes:["(talk)"]},yawn:{title:"Yawn",codes:["(yawn)","|-()"]},puke:{title:"Puke",codes:["(puke)",":&",":-&",":=&"]},"doh!":{title:"Doh!",codes:["(doh)"]},angry:{title:"Angry",codes:[":@",":-@",":=@","x(","x-(","x=(","X(","X-(","X=("]},"it-wasnt-me":{title:"It wasn't me",codes:["(wasntme)"]},party:{title:"Party!!!",codes:["(party)"]},worried:{title:"Worried",codes:[":S",":-S",":=S",":s",":-s",":=s"]},mmm:{title:"Mmm...",codes:["(mm)"]},nerd:{title:"Nerd",codes:["8-|","B-|","8|","B|","8=|","B=|","(nerd)"]},"lips-sealed":{title:"Lips Sealed",codes:[":x",":-x",":X",":-X",":#",":-#",":=x",":=X",":=#"]},hi:{title:"Hi",codes:["(hi)"]},call:{title:"Call",codes:["(call)"]},devil:{title:"Devil",codes:["(devil)"]},angel:{title:"Angel",codes:["(angel)"]},envy:{title:"Envy",codes:["(envy)"]},wait:{title:"Wait",codes:["(wait)"]},bear:{title:"Bear",codes:["(bear)","(hug)"]},"make-up":{title:"Make-up",codes:["(makeup)","(kate)"]},"covered-laugh":{title:"Covered Laugh",codes:["(giggle)","(chuckle)"]},"clapping-hands":{title:"Clapping Hands",codes:["(clap)"]},thinking:{title:"Thinking",codes:["(think)",":?",":-?",":=?"]},bow:{title:"Bow",codes:["(bow)"]},rofl:{title:"Rolling on the floor laughing",codes:["(rofl)"]},whew:{title:"Whew",codes:["(whew)"]},happy:{title:"Happy",codes:["(happy)"]},smirking:{title:"Smirking",codes:["(smirk)"]},nodding:{title:"Nodding",codes:["(nod)"]},shaking:{title:"Shaking",codes:["(shake)"]},punch:{title:"Punch",codes:["(punch)"]},emo:{title:"Emo",codes:["(emo)"]},yes:{title:"Yes",codes:["(y)","(Y)","(ok)"]},no:{title:"No",codes:["(n)","(N)"]},handshake:{title:"Shaking Hands",codes:["(handshake)"]},skype:{title:"Skype",codes:["(skype)","(ss)"]},heart:{title:"Heart",codes:["(h)","<3","(H)","(l)","(L)"]},"broken-heart":{title:"Broken heart",codes:["(u)","(U)"]},mail:{title:"Mail",codes:["(e)","(m)"]},flower:{title:"Flower",codes:["(f)","(F)"]},rain:{title:"Rain",codes:["(rain)","(london)","(st)"]},sun:{title:"Sun",codes:["(sun)"]},time:{title:"Time",codes:["(o)","(O)","(time)"]},music:{title:"Music",codes:["(music)"]},movie:{title:"Movie",codes:["(~)","(film)","(movie)"]},phone:{title:"Phone",codes:["(mp)","(ph)"]},coffee:{title:"Coffee",codes:["(coffee)"]},pizza:{title:"Pizza",codes:["(pizza)","(pi)"]},cash:{title:"Cash",codes:["(cash)","(mo)","($)"]},muscle:{title:"Muscle",codes:["(muscle)","(flex)"]},cake:{title:"Cake",codes:["(^)","(cake)"]},beer:{title:"Beer",codes:["(beer)"]},drink:{title:"Drink",codes:["(d)","(D)"]},dance:{title:"Dance",codes:["(dance)","\\o/","\\:D/","\\:d/"]},ninja:{title:"Ninja",codes:["(ninja)"]},star:{title:"Star",codes:["(*)"]},mooning:{title:"Mooning",codes:["(mooning)"]},finger:{title:"Finger",codes:["(finger)"]},bandit:{title:"Bandit",codes:["(bandit)"]},drunk:{title:"Drunk",codes:["(drunk)"]},smoking:{title:"Smoking",codes:["(smoking)","(smoke)","(ci)"]},toivo:{title:"Toivo",codes:["(toivo)"]},rock:{title:"Rock",codes:["(rock)"]},headbang:{title:"Headbang",codes:["(headbang)","(banghead)"]},bug:{title:"Bug",codes:["(bug)"]},fubar:{title:"Fubar",codes:["(fubar)"]},poolparty:{title:"Poolparty",codes:["(poolparty)"]},swearing:{title:"Swearing",codes:["(swear)"]},tmi:{title:"TMI",codes:["(tmi)"]},heidy:{title:"Heidy",codes:["(heidy)"]},myspace:{title:"MySpace",codes:["(MySpace)"]},malthe:{title:"Malthe",codes:["(malthe)"]},tauri:{title:"Tauri",codes:["(tauri)"]},priidu:{title:"Priidu",codes:["(priidu)"]}};

       // $.emoticons.define(definition);


var socket = io.connect('http://localhost:5000');
 
 
$(document).ready(function(){

    // $('#overview').html($.emoticons.toString())
/* masuk user */
    socket.on('connect', function(){
        socket.emit('adduser', prompt("Namanya siapa mas bro?"));
    });
 
    $('#send').click(function(e){
        var msg = $('#message').val();
        if(msg != '') {
            socket.emit('send',{text: msg });
         //   msg = $.emoticons.replace(msg);
            $('#log .inner').append('<div class="me"><span>Me:</span>'+msg+'</div>');
             
            $('#message').val('').focus();
            $('#log').scrollTop($('.inner').height());
        }
    });
    $('#message').keypress(function(e) {
        if(e.which == 13) {
            $('#send').trigger('click');
        }
    });
    $('#message').keyup(function(){
        if($('#message').val() != ''){
            socket.emit('typing',{text:'...is typing'});
        }
        else{
            socket.emit('typing',{text:'ready...'});
        }
    });
 
socket.on('istyping',function(data){
    $('.typing').html(data.text);
});
     
socket.on('receive', function (username,data) {
    //var reply = $.emoticons.replace(data.text);
    var reply = data.text;
    $('.typing').html('ready...');
    $('#log .inner').append('<div class="stranger"><span>'+username+':</span>'+reply+"</div>");
    $('#log').scrollTop($('.inner').height());
    var title = $('title').text();
    var blinktitle = setInterval(function(){
        if($('title').text() == title){
            $('title').html(data.text);
        }
        else{
            $('title').html(title);
        }
    },2000);
    $('#message').focus(function(){
        clearInterval(blinktitle);
        $('title').html(title);
    });
});
socket.on('updateusers', function(data) {
    $('.userlist').empty();
        $.each(data, function(key, value) {
        $('.userlist').append('<li><a href="#">' + key + '</a></li>');
    });
});
 
 
 
});
</script>
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
<style type="text/css">
body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
 
#log{
    height:500px;
    overflow:auto;
    font-family:sans-serif;
    background:#fff;
}
#log .inner{
}
.me{
    color:blue;
}
.stranger{
    color:red;
}
.me span,
.stranger span{
    font-weight:bold;
}
.typing{
    font-style:italic;
    color:#646464;
}
#message{
    width:90%;
}
.form-horizontal{
    margin:10px 0;
}
.server{
    font-style:italic;
    color:#666666
}
</style>
</head>
<body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">node.js</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li>
                <a href="#">Halo</a>
              </li>
              <li>
                <a href="#">Hehe</a>
              </li>
           
            </ul>
          </div>
        </div>
      </div>
    </div>
<div class="container">
<div class="row-fluid">
    <div class="span9">
    <div id="log" class="well">
    <div class="inner">
        Say something...<br />
    </div>
    </div>
    <div class="alert typing">ready...</div>
    <div class="form-horizontal">
        <input id="message" type="text" value="" />
        <button id="send" class="btn btn-primary" type="button">send</button>
    </div>
    </div>
    <div class="span3">
    <h4>Users</h4>
    <ul class="nav nav-tabs nav-stacked userlist"></ul>
    </div>
</div>
<div id="overview"></div>
</div>
</body>
</html>